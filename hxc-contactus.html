<!DOCTYPE html>
<html lang="zh-CN">

<head>
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width,initial-scale=1" />
   <title>在线联系表单 - 盒小仓</title>
   <meta name="description" content="联系盒小仓（易推网络）在线表单：问题反馈、功能建议、商务合作等。" />
   <style>
      :root {
         --brand: #2d6cdf;
         --ink: #111827;
         --muted: #6b7280;
         --line: #e5e7eb;
         --ok: #10b981;
         --warn: #f59e0b;
         --err: #ef4444;
         --bg: #ffffff
      }

      * {
         box-sizing: border-box
      }

      body {
         margin: 0;
         background: var(--bg);
         color: var(--ink);
         font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "PingFang SC", "Microsoft YaHei", sans-serif;
         line-height: 1.75
      }

      .wrap {
         max-width: 720px;
         margin: 0 auto;
         padding: 28px 20px 64px
      }

      h1 {
         font-size: 24px;
         margin: 10px 0 18px
      }

      .card {
         border: 1px solid var(--line);
         border-radius: 14px;
         padding: 18px;
         background: #fff;
         box-shadow: 0 1px 2px rgba(0, 0, 0, .03)
      }

      form {
         display: grid;
         grid-template-columns: 1fr 1fr;
         gap: 14px
      }

      .row {
         display: flex;
         flex-direction: column;
         gap: 6px
      }

      .full {
         grid-column: 1/-1
      }

      label {
         font-size: 14px
      }

      input,
      select,
      textarea {
         border: 1px solid #d1d5db;
         border-radius: 12px;
         padding: 12px;
         font-size: 15px;
         outline: none;
         background: #fff
      }

      input:focus,
      select:focus,
      textarea:focus {
         border-color: var(--brand);
         box-shadow: 0 0 0 3px rgba(45, 108, 223, .12)
      }

      textarea {
         min-height: 140px;
         resize: vertical
      }

      .hint {
         font-size: 12px;
         color: var(--muted)
      }

      .btns {
         display: flex;
         gap: 10px;
         align-items: center
      }

      .btn {
         display: inline-block;
         padding: 11px 16px;
         border-radius: 999px;
         border: 1px solid var(--brand);
         background: var(--brand);
         color: #fff;
         font-weight: 600;
         cursor: pointer
      }

      .btn.ghost {
         background: #fff;
         color: var(--brand)
      }

      a {
         color: var(--brand);
         text-decoration: none
      }

      #formTip {
         font-size: 14px
      }

      .ok {
         color: var(--ok)
      }

      .warn {
         color: var(--warn)
      }

      .err {
         color: var(--err)
      }

      .muted {
         color: var(--muted)
      }

      @media (max-width:720px) {
         form {
            grid-template-columns: 1fr
         }
      }
   </style>
</head>

<body>
   <main class="wrap">
      <h1>在线联系表单</h1>
      <div class="card">
         <form id="contactForm" novalidate>
            <div class="row">
               <label for="name">您的姓名*</label>
               <input id="name" name="name" placeholder="请输入您的称呼" autocomplete="name" required />
            </div>

            <div class="row">
               <label for="email">邮箱*</label>
               <input id="email" name="email" type="email" placeholder="name@example.com" autocomplete="email"
                  required />
            </div>

            <div class="row">
               <label for="phone">联系电话</label>
               <input id="phone" name="phone" inputmode="tel" autocomplete="tel" placeholder="选填：便于快速联系" />
            </div>

            <div class="row">
               <label for="topic">联系主题*</label>
               <select id="topic" name="topic" required>
                  <option value="">请选择</option>
                  <option>产品咨询</option>
                  <option>问题与反馈</option>
                  <option>商务合作</option>
                  <option>发票与对账</option>
                  <option>隐私与个人信息</option>
                  <option>其他</option>
               </select>
            </div>

            <div class="row full">
               <label for="msg">详细描述*</label>
               <textarea id="msg" name="message" placeholder="请描述问题、期望与相关信息（如账号ID、订单号、截图链接等）" required></textarea>
               <span class="hint">提交即表示您已阅读并同意
                  <a href="【用户协议URL】" target="_blank" rel="noopener">《用户协议》</a> 与
                  <a href="【隐私政策URL】" target="_blank" rel="noopener">《隐私政策》</a>。
               </span>
            </div>

            <div class="row full">
               <label><input type="checkbox" id="consent" required /> 我同意为处理本次沟通而被联系并保存必要信息</label>
            </div>

            <!-- 反垃圾蜜罐（请勿删除） -->
            <input type="text" id="website" name="website" tabindex="-1" autocomplete="off"
               style="position:absolute;left:-9999px" />

            <div class="row full btns">
               <button type="submit" class="btn">提交</button>
               <button type="reset" class="btn ghost">重置</button>
               <span id="formTip" class="muted" role="status" aria-live="polite"></span>
            </div>

            <p class="hint full">本表单适用于“盒小仓”，开发商：<strong>易推网络</strong>。</p>
         </form>
      </div>
   </main>

   <script>
      // === 使用说明 ===
      // 1) 若你已有后端接口，将 ENDPOINT 填为你的 API（如 "/api/contact"），并把 USE_MAILTO_FALLBACK 设为 false。
      // 2) 若没有后端，填写 SERVICE_EMAIL，表单将调用本机邮件客户端发送邮件（mailto 方案）。
      const ENDPOINT = ""; // 例如 "/api/contact"
      const USE_MAILTO_FALLBACK = true; // 有后端时设为 false
      const SERVICE_EMAIL = "【填写客服邮箱】";

      const form = document.getElementById('contactForm');
      const tip = document.getElementById('formTip');

      function setTip(text, cls) { tip.textContent = text; tip.className = cls ? cls : 'muted'; }
      function validEmail(v) { return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); }

      form.addEventListener('submit', async (e) => {
         e.preventDefault();
         setTip('', 'muted');

         const data = Object.fromEntries(new FormData(form).entries());

         // 蜜罐触发：直接静默成功
         if (data.website) { setTip('提交成功。', 'ok'); form.reset(); return; }

         // 简单校验
         if (!data.name || !data.email || !data.topic || !data.message) {
            setTip('请填写所有必填项（*）。', 'err'); return;
         }
         if (!validEmail(data.email)) { setTip('邮箱格式不正确。', 'err'); return; }
         if (!document.getElementById('consent').checked) { setTip('请勾选信息处理同意。', 'err'); return; }

         // 提交方式选择
         if (!ENDPOINT || USE_MAILTO_FALLBACK) {
            if (!SERVICE_EMAIL || SERVICE_EMAIL.includes('【')) {
               setTip('请先在代码中配置 SERVICE_EMAIL。', 'warn');
               return;
            }
            const subject = encodeURIComponent(`[盒小仓联系] ${data.topic} - ${data.name}`);
            const body = encodeURIComponent(
               `姓名：${data.name}
邮箱：${data.email}
电话：${data.phone || '-'}
主题：${data.topic}

详细描述：
${data.message}

--
来自 盒小仓 在线联系表单`
            );
            window.location.href = `mailto:${encodeURIComponent(SERVICE_EMAIL)}?subject=${subject}&body=${body}`;
            setTip('将通过本机邮件客户端发送。若未自动打开，请手动发送至：' + SERVICE_EMAIL, 'ok');
            form.reset();
            return;
         }

         // 后端接口提交
         try {
            const res = await fetch(ENDPOINT, {
               method: 'POST',
               headers: { 'Content-Type': 'application/json' },
               body: JSON.stringify({
                  app: '盒小仓',
                  vendor: '易推网络',
                  ...data
               })
            });
            if (!res.ok) throw new Error('network');
            setTip('提交成功，我们已收到您的消息。', 'ok');
            form.reset();
         } catch (err) {
            setTip('提交失败，请稍后重试或直接邮件至：' + SERVICE_EMAIL, 'err');
         }
      });
   </script>
</body>

</html>